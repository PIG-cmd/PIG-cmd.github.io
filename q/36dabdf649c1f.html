<meta charset="utf-8">
<script src=/bmobSDK.js></script>
<title>2020学年第二学期期末测验预初6班考试成绩统计</title>
<center><p style='font-size:3em'>2020学年第二学期期末测验预初6班考试成绩统计</p></center>
<p id=monitor>正在加载数据......</p>
<script>
var n = {"1":"冯恩娜","2":"齐芸瑶","3":"徐希玮","4":"张诗琪","5":"林慧如","6":"康恩茜","7":"张嘉怡","8":"吴妍琦","9":"吴优","10":"聂小雅","11":"孙莹馨","12":"万逾豪","13":"赵一诚","14":"李沪纲","15":"胡峰源","16":"王宇轩","17":"徐亦辰","18":"李雨丞","19":"张粟童","20":"朱禹辰","21":"陆哲文","22":"朴有丽","23":"胡艺菲","24":"张海阳","25":"徐辰羽","26":"翁希娜","27":"随天佑","28":"杨佳宇","29":"陈泰哲","30":"姜城彬","31":"李成浩","32":"徐崇斌","33":"张博","34":"熊方周","35":"杨可欣"};
Bmob.initialize("5200d7f4ce3ea3d7","081126");
const table = Bmob.Query("question");
const id = "BZ9c1115";
table.get(id).then(function(res){
	var dat = res.data;
	dat = JSON.parse(dat);
	var i = 1;
	var str = "<table border=1><tr><td>学号</td><td>姓名</td><td>语文</td><td>数学</td><td>英语</td></tr>";
	while (i < 36){
		if (dat[i][0] == null)
			dat[i][0] = "";
		if (dat[i][1] == null)
			dat[i][1] = "";
		if (dat[i][2] == null)
			dat[i][2] = "";
		
		str += "<tr><td>" + i + "</td><td>" + n[i] + "</td><td><input type=text class=chinese value=" + dat[i][0] + "></td><td><input type=text class=maths value=" + dat[i][1] + "></td><td><input type=text class=english value=" + dat[i][2] + "></td></tr>";
		i++;
	};
	str += "</table>";
	document.querySelector("#monitor").innerHTML = "<input type=button value=提交数据 onclick=javascript:upload_data();><hr>" + str;
}).catch(function(err){
	console.log(err);
});	
function upload_data(){
	var ch = document.getElementsByClassName("chinese");
	var ma = document.getElementsByClassName("maths");
	var en = document.getElementsByClassName("english");
	var dat = [null];
	var i = 1;
	while (i < 36){
		dat[i] = [];
		dat[i][0] = ch[i-1].value;
		dat[i][1] = ma[i-1].value;
		dat[i][2] = en[i-1].value;
		i++;
	};
	dat = JSON.stringify(dat);
	table.set("id",id);
	table.set("data",dat);
	table.save().then(function(res){
		console.log(res);
		alert("提交成功！");
		location.reload();
	}).catch(function(err){
		console.log(err);
	});
};
</script>
